{"version":3,"sources":["components/footer.js","components/layout.js","components/loading.js","components/prepare.js","../node_modules/s-ago/index.js","routes/pulse.js"],"names":["Footer","h","id","class","href","Layout","_ref","children","fullWidth","props","style","maxWidth","Object","assign","Loading","display","width","height","verticalAlign","marginLeft","marginRight","textAlign","fontWeight","color","prepare","prepareComponentData","WrappedComponent","Component","constructor","super","this","state","loading","componentDidMount","ret","Promise","then","setState","render","format","diff","divisor","unit","past","future","isInTheFuture","val","Math","round","abs","units","max","value","name","module","exports","date","Date","now","getTime","i","length","typeMap","merged","open","draft","closed","buildPull","pull","type","borderLeft","mergedAt","closedAt","url","title","labels","map","label","Fragment","backgroundColor","buildLabels","ago","createdAt","connect","commits","getCommits","mergedPulls","getMergedPullsSinceLastRelease","openedPulls","getOpenedPullsSinceLastRelease","closedIssues","getClosedIssues","openedIssues","getOpenedIssues","release","getLatestRelease","details","getDetails","dispatch","bindActionCreators","fetchBootstrap","fetchCommits","fetchPulls","fetchReleases","fetchIssues","async","_ref2","Meta","hero","description","toDateString","authors","files","numberWithCommas","additions","deletions","commit","author"],"mappings":"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","file":"static/js/10.d21eec56.chunk.js","sourcesContent":["import { h } from 'preact'\n\nconst Footer = () => (\n  <section id=\"footer\">\n    <div class=\"content-section\">\n      <footer>\n        <hr />\n        Developed with <i class=\"fas fa-heart\" /> and{' '}\n        <i class=\"fas fa-coffee\" /> using{' '}\n        <a href=\"https://getbootstrap.com/\">Bootstrap</a>,{' '}\n        <a href=\"https://reactjs.org/\">React</a> and{' '}\n        <a href=\"https://fontawesome.com/\">Font Awesome</a>\n        <a href={`/atom.xml`} class=\"float-right\">\n          <i class=\"fas fa-rss\" /> Subscribe via RSS\n        </a>\n      </footer>\n    </div>\n  </section>\n)\n\nexport default Footer\n","import { h } from 'preact'\nimport Footer from './footer'\n\nconst Layout = ({ children, fullWidth, ...props }) => {\n  props.class = props.class ? 'container ' + props.class : 'container'\n  props.style = {\n    ...(props.style || {}),\n    maxWidth: fullWidth ? '100%' : ''\n  }\n\n  return (\n    <div {...props} id=\"layout\">\n      {children}\n      <Footer />\n    </div>\n  )\n}\n\nexport default Layout\n","import { h } from 'preact'\n\nconst Loading = () => (\n  <div\n    style={{\n      display: 'table',\n      width: '100%',\n      height: '100%'\n    }}\n  >\n    <div\n      style={{\n        display: 'table-cell',\n        verticalAlign: 'middle'\n      }}\n    >\n      <div\n        style={{\n          marginLeft: 'auto',\n          marginRight: 'auto',\n          textAlign: 'center',\n          fontWeight: 700,\n          color: 'white'\n        }}\n      >\n        <div class=\"fa-4x\">\n          <i class=\"fas fa-spinner fa-spin\"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n)\n\nexport default Loading\n","import { h, Component } from 'preact'\nimport Loading from './loading'\n\nconst prepare = prepareComponentData => WrappedComponent => {\n  return class extends Component {\n    constructor() {\n      super()\n      this.state = {\n        loading: true\n      }\n    }\n\n    componentDidMount() {\n      const ret = prepareComponentData(this.props)\n      if (ret instanceof Promise) {\n        ret.then(() =>\n          this.setState({\n            loading: false\n          })\n        )\n      } else {\n        this.setState({\n          loading: false\n        })\n      }\n    }\n\n    render(props) {\n      const { loading } = this.state\n      return loading ? <Loading /> : <WrappedComponent {...props} />\n    }\n  }\n}\n\nexport default prepare\n","\"use strict\";\n/*\n\nUsage:\n\nvar ago = require('s-ago');\n\nvar now = new Date();\nvar yesterday = new Date(now.getTime() - (24 * 60 * 60 * 1000));\nvar hoursAgo = new Date(now.getTime() - (6 * 60 * 60 * 1000));\n\nago(now); // 'just now'\nago(yesterday); // 'yesterday'\nago(hoursAgo); // '6 hours ago'\n\n*/\nfunction format(diff, divisor, unit, past, future, isInTheFuture) {\n    var val = Math.round(Math.abs(diff) / divisor);\n    if (isInTheFuture)\n        return val <= 1 ? future : 'in ' + val + ' ' + unit + 's';\n    return val <= 1 ? past : val + ' ' + unit + 's ago';\n}\nvar units = [\n    { max: 2760000, value: 60000, name: 'minute', past: 'a minute ago', future: 'in a minute' },\n    { max: 72000000, value: 3600000, name: 'hour', past: 'an hour ago', future: 'in an hour' },\n    { max: 518400000, value: 86400000, name: 'day', past: 'yesterday', future: 'tomorrow' },\n    { max: 2419200000, value: 604800000, name: 'week', past: 'last week', future: 'in a week' },\n    { max: 28512000000, value: 2592000000, name: 'month', past: 'last month', future: 'in a month' } // max: 11 months\n];\nmodule.exports = function ago(date) {\n    var diff = Date.now() - date.getTime();\n    // less than a minute\n    if (Math.abs(diff) < 60000)\n        return 'just now';\n    for (var i = 0; i < units.length; i++) {\n        if (Math.abs(diff) < units[i].max) {\n            return format(diff, units[i].value, units[i].name, units[i].past, units[i].future, diff < 0);\n        }\n    }\n    // `year` is the final unit.\n    // same as:\n    //  {\n    //    max: Infinity,\n    //    value: 31536000000,\n    //    name: 'year',\n    //    past: 'last year'\n    //  }\n    return format(diff, 31536000000, 'year', 'last year', 'in a year', diff < 0);\n};\n","import { h, Fragment } from 'preact'\nimport './home.scss'\nimport './pulse.scss'\nimport { connect } from 'react-redux'\nimport Layout from '../components/layout'\nimport {\n  fetchCommits,\n  fetchIssues,\n  fetchPulls,\n  fetchReleases,\n  getClosedIssues,\n  getCommits,\n  getDetails,\n  getLatestRelease,\n  getMergedPullsSinceLastRelease,\n  getOpenedIssues,\n  getOpenedPullsSinceLastRelease\n} from '../modules/git'\nimport hero from '../_data/hero'\nimport Meta from '../components/meta'\nimport { bindActionCreators } from 'redux'\nimport prepare from '../components/prepare'\nimport { numberWithCommas } from '../util'\nimport ago from 's-ago'\nimport { fetchBootstrap } from '../modules/bootstrap'\n\nconst typeMap = {\n  merged: '#6f42c1',\n  open: '#2cbe4e',\n  draft: '#c6c6c6',\n  closed: '#cb2431'\n}\n\nconst buildLabels = pull =>\n  pull.labels &&\n  pull.labels.map(label => (\n    <Fragment>\n      {' '}\n      <span\n        class=\"badge\"\n        style={{ color: 'black', backgroundColor: '#' + label.color }}\n      >\n        {label.name}\n      </span>\n    </Fragment>\n  ))\n\nconst buildPull = (pull, type) => (\n  <a\n    class=\"list-group-item list-group-item-action\"\n    style={{\n      borderLeft: `5px solid ${\n        !pull.mergedAt && pull.closedAt\n          ? typeMap.closed\n          : pull.draft\n          ? typeMap.draft\n          : typeMap[type]\n      }`,\n      color: 'white'\n    }}\n    href={pull.url}\n  >\n    {pull.title} {buildLabels(pull)}\n    <br />\n    <span class=\"text-muted\">\n      {ago(\n        pull.mergedAt\n          ? pull.mergedAt\n          : pull.closedAt\n          ? pull.closedAt\n          : pull.createdAt\n      )}\n    </span>\n  </a>\n)\n\nconst Pulse = ({\n  details,\n  commits,\n  release,\n  mergedPulls,\n  openedPulls,\n  closedIssues,\n  openedIssues\n}) =>\n  release.date && (\n    <Layout>\n      <Meta\n        title={`Pulse - ${hero.title}`}\n        description=\"Activity since last release\"\n      />\n\n      <section id=\"pulse\">\n        <div\n          class=\"content-section\"\n          style={{\n            maxWidth: '100%'\n          }}\n        >\n          <div class=\"page-header\">\n            <h1>Activity since the {release.name} release</h1>\n            <p class=\"text-muted\">\n              From <b>{release.date.toDateString()}</b> to{' '}\n              <b>{new Date().toDateString()}</b>\n            </p>\n          </div>\n\n          <div\n            class=\"progress page-header\"\n            title={`${\n              openedIssues.length + openedPulls.length\n            } open issues and pull requests`}\n            style={{\n              backgroundColor: typeMap.open\n            }}\n          >\n            <div\n              class=\"progress-bar\"\n              title={`${mergedPulls.length} merged pull requests`}\n              style={{\n                width:\n                  (mergedPulls.length /\n                    (mergedPulls.length +\n                      openedPulls.length +\n                      closedIssues.length +\n                      openedIssues.length)) *\n                    100 +\n                  '%',\n                backgroundColor: typeMap.merged\n              }}\n            />\n            <div\n              class=\"progress-bar\"\n              title={`${closedIssues.length} closed issues`}\n              style={{\n                width:\n                  (closedIssues.length /\n                    (mergedPulls.length +\n                      openedPulls.length +\n                      closedIssues.length +\n                      openedIssues.length)) *\n                    100 +\n                  '%',\n                backgroundColor: typeMap.closed\n              }}\n            />\n          </div>\n\n          <div class=\"page-header\">\n            Excluding merges, <b>{details.commits} commits</b> from{' '}\n            <b>{details.authors} authors</b> have been pushed to master. On\n            master, <b>{details.files} files</b> have changed and there have\n            been{' '}\n            <b>\n              <span class=\"text-success\">\n                {numberWithCommas(details.additions)}\n              </span>{' '}\n              additions\n            </b>{' '}\n            and{' '}\n            <b>\n              <span class=\"text-danger\">\n                {numberWithCommas(details.deletions)}\n              </span>{' '}\n              deletions\n            </b>\n            .\n          </div>\n\n          <div class=\"row page-header\">\n            <div class=\"col-md-6\">\n              <h1 class=\"page-header\">\n                <b>{mergedPulls.length}</b> pull requests merged\n              </h1>\n              <ul class=\"list-group\">\n                {mergedPulls.map(pull => buildPull(pull, 'merged'))}\n              </ul>\n            </div>\n            <div class=\"col-md-6\">\n              <h1 class=\"page-header\">\n                <b>{openedPulls.length}</b> pull requests opened\n              </h1>\n              <ul class=\"list-group\">\n                {openedPulls.map(pull => buildPull(pull, 'open'))}\n              </ul>\n            </div>\n          </div>\n\n          <div class=\"row page-header\">\n            <div class=\"col-md-6\">\n              <h1 class=\"page-header\">\n                <b>{closedIssues.length}</b> issues closed\n              </h1>\n              <ul class=\"list-group\">\n                {closedIssues.map(pull => buildPull(pull, 'closed'))}\n              </ul>\n            </div>\n            <div class=\"col-md-6\">\n              <h1 class=\"page-header\">\n                <b>{openedIssues.length}</b> issues opened\n              </h1>\n              <ul class=\"list-group\">\n                {openedIssues.map(pull => buildPull(pull, 'open'))}\n              </ul>\n            </div>\n          </div>\n\n          <h1 class=\"page-header\">\n            <b>{commits.length}</b> new commits\n          </h1>\n          <ul class=\"list-group\">\n            {commits.map(commit => {\n              return (\n                <a\n                  class=\"list-group-item list-group-item-action\"\n                  style={{\n                    color: 'white'\n                  }}\n                  href={commit.url}\n                >\n                  {commit.title}\n                  <br />\n                  <span class=\"text-muted\">by {commit.author.name}</span>\n                </a>\n              )\n            })}\n          </ul>\n        </div>\n      </section>\n    </Layout>\n  )\n\nconst mapStateToProps = state => ({\n  commits: getCommits(state),\n  mergedPulls: getMergedPullsSinceLastRelease(state),\n  openedPulls: getOpenedPullsSinceLastRelease(state),\n  closedIssues: getClosedIssues(state),\n  openedIssues: getOpenedIssues(state),\n  release: getLatestRelease(state),\n  details: getDetails(state)\n})\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchBootstrap,\n      fetchCommits,\n      fetchPulls,\n      fetchReleases,\n      fetchIssues\n    },\n    dispatch\n  )\n\nconst prepareComponentData = async ({\n  fetchBootstrap,\n  fetchCommits,\n  fetchPulls,\n  fetchReleases,\n  fetchIssues\n}) => {\n  await fetchBootstrap()\n  await fetchReleases()\n  fetchCommits()\n  fetchPulls()\n  fetchIssues()\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(prepare(prepareComponentData)(Pulse))\n"],"sourceRoot":""}