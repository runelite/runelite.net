{"version":3,"sources":["components/footer.js","components/layout.js","components/runescape-map.js","routes/tile-show.js"],"names":["Footer","id","class","href","getBaseUrl","Layout","children","fullWidth","props","style","maxWidth","DEFAULT_VIEW","MainTileLayer","TileLayer","extend","initialize","url","options","this","_url","originalPlane","plane","setOptions","getTileUrl","coords","Util","template","source","mapId","zoom","z","x","y","resetPlane","setPlane","original","getPlane","Math","max","minPlane","min","maxPlane","_map","fire","redraw","createTile","done","tile","prototype","call","onerror","error","preventDefault","fromLatLng","latLng","parseInt","lng","lat","toLatLng","mapTile","num","regionId","regionX","regionY","jsColor","intColor","join","argb","slice","label","color","prepareMap","map","defaultView","setView","mouseRect","rectangle","fillColor","fillOpacity","weight","interactive","addTo","on","e","mousePos","latlng","setBounds","locationControl","Control","position","onAdd","container","DomUtil","create","button","updateButton","region","center","getCenter","rsCenter","rsRegion","regions","includes","name","findCurrentRegion","hidden","textContent","resetButton","DomEvent","disableClickPropagation","addListener","viewport","fitBounds","tileLayer","planeButtons","upButton","downButton","updateButtons","addClass","removeClass","TileMapHandler","tiles","selected","useMap","noWrap","minZoom","maxNativeZoom","maxZoom","errorTileUrl","length","tilesX","t","tilesY","minX","maxX","minY","maxY","bounds","pathOptions","RuneScapeMap","maxBounds","maxBoundsViscosity","attributionControl","whenCreated","crs","CRS","Simple","connect","state","b64","decodedData","jsonData","b64string","window","location","hash","substring","atob","JSON","parse","ignored","data","title","hero","description"],"mappings":"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","file":"static/js/1.86444542.chunk.js","sourcesContent":["import { h } from 'preact'\nimport { getBaseUrl } from '../util'\n\nconst Footer = () => (\n  <section id=\"footer\">\n    <div class=\"content-section\">\n      <footer>\n        <hr />\n        Developed with <i class=\"fas fa-heart\" /> and{' '}\n        <i class=\"fas fa-coffee\" /> using{' '}\n        <a href=\"https://getbootstrap.com/\">Bootstrap</a>,{' '}\n        <a href=\"https://reactjs.org/\">React</a> and{' '}\n        <a href=\"https://fontawesome.com/\">Font Awesome</a>\n        <a href={`${getBaseUrl()}/atom.xml`} class=\"float-right\">\n          <i class=\"fas fa-rss\" /> Subscribe via RSS\n        </a>\n      </footer>\n    </div>\n  </section>\n)\n\nexport default Footer\n","import { h } from 'preact'\nimport Footer from './footer'\n\nconst Layout = ({ children, fullWidth, ...props }) => {\n  props.class = props.class ? 'container ' + props.class : 'container'\n  props.style = {\n    ...(props.style || {}),\n    maxWidth: fullWidth ? '100%' : ''\n  }\n\n  return (\n    <div {...props} id=\"layout\">\n      {children}\n      <Footer />\n    </div>\n  )\n}\n\nexport default Layout\n","import { h, Fragment } from 'preact'\nimport {\n  rectangle,\n  setOptions,\n  Control,\n  DomUtil,\n  DomEvent,\n  TileLayer,\n  Util,\n  CRS\n} from 'leaflet'\nimport {\n  MapContainer,\n  Rectangle,\n  Tooltip,\n  ImageOverlay,\n  useMap\n} from 'react-leaflet'\nimport regions from '../_data/regions'\nimport './runescape-map.scss'\n\nconst BOUNDS_TOLERANCE = 4\nconst MIN_ZOOM = -4\nconst MAX_ZOOM = 8\nconst MAX_NATIVE_ZOOM = 2\nconst DEFAULT_ZOOM = 0\nconst DEFAULT_VIEW = [3225, 3219]\nconst MIN_PLANE = 0\nconst MAX_PLANE = 3\n\nconst MainTileLayer = TileLayer.extend({\n  initialize: function (url, options) {\n    this._url = url\n    this.originalPlane = options.plane\n    setOptions(this, options)\n  },\n\n  getTileUrl: function (coords) {\n    return Util.template(this._url, {\n      source: this.options.source,\n      mapId: -1,\n      zoom: coords.z,\n      plane: this.options.plane,\n      x: coords.x,\n      y: -(1 + coords.y)\n    })\n  },\n\n  resetPlane: function () {\n    this.setPlane(this.originalPlane)\n  },\n\n  setPlane: function (plane) {\n    const original = this.getPlane()\n    plane = Math.max(plane, this.options.minPlane)\n    plane = Math.min(plane, this.options.maxPlane)\n\n    if (plane === original) {\n      return\n    }\n\n    this.options.plane = plane\n\n    if (this._map) {\n      this._map.fire('planechange')\n    }\n\n    this.redraw()\n  },\n\n  getPlane: function () {\n    return this.options.plane\n  },\n\n  createTile: function (coords, done) {\n    let tile = TileLayer.prototype.createTile.call(this, coords, done)\n    tile.onerror = error => error.preventDefault()\n    return tile\n  }\n})\n\nconst fromLatLng = latLng => {\n  return {\n    x: parseInt(latLng.lng),\n    y: parseInt(latLng.lat)\n  }\n}\n\nconst toLatLng = (x, y) => {\n  return [y, x]\n}\n\nconst findCurrentRegion = map => {\n  const center = map.getCenter()\n  const rsCenter = fromLatLng(center)\n  const rsRegion = ((rsCenter.x >> 6) << 8) | (rsCenter.y >> 6)\n\n  for (const region of regions) {\n    if (region.regions.includes(rsRegion)) {\n      return region.name\n    }\n  }\n\n  return ''\n}\n\nconst toColor = num => {\n  num >>>= 0\n  const b = num & 0xff,\n    g = (num & 0xff00) >>> 8,\n    r = (num & 0xff0000) >>> 16,\n    a = ((num & 0xff000000) >>> 24) / 255\n  return 'rgba(' + [r, g, b, a].join(',') + ')'\n}\n\nconst mapTile = tile => {\n  const regionId = tile['regionId']\n  const regionX = tile['regionX']\n  const regionY = tile['regionY']\n  let jsColor = '#ffffff'\n\n  if (tile['color']) {\n    const intColor = tile['color']['value']\n\n    if (intColor) {\n      jsColor = toColor(intColor)\n    } else if (tile['color']) {\n      const argb = tile['color']\n      jsColor = '#' + argb.slice(3, 9) + argb[1] + argb[2]\n    }\n  }\n\n  const x = ((regionId >>> 8) << 6) + regionX\n  const y = ((regionId & 0xff) << 6) + regionY\n  const z = tile['z']\n\n  return {\n    x,\n    y,\n    z,\n    label: tile['label'],\n    color: jsColor\n  }\n}\n\nconst prepareMap = map => {\n  const defaultView = toLatLng(DEFAULT_VIEW[0], DEFAULT_VIEW[1])\n  map.setView(defaultView)\n\n  const mouseRect = rectangle(\n    [\n      [0, 0],\n      [1, 1]\n    ],\n    {\n      color: '#1e1e1e',\n      fillColor: '#1e1e1e',\n      fillOpacity: 0.3,\n      weight: 1,\n      interactive: false\n    }\n  )\n\n  mouseRect.addTo(map)\n\n  map.on('mousemove', e => {\n    const mousePos = fromLatLng(e.latlng)\n    mouseRect.setBounds([\n      toLatLng(mousePos.x, mousePos.y),\n      toLatLng(mousePos.x + 1, mousePos.y + 1)\n    ])\n  })\n\n  const locationControl = new Control({ position: 'topright' })\n  locationControl.onAdd = map => {\n    const container = DomUtil.create('div', 'leaflet-bar leaflet-control')\n\n    const button = DomUtil.create('span', 'leaflet-custom-control', container)\n    const updateButton = () => {\n      const region = findCurrentRegion(map)\n      button.hidden = !region\n      button.textContent = region\n    }\n\n    updateButton()\n    map.on('move', updateButton)\n    return container\n  }\n\n  locationControl.addTo(map)\n\n  const resetButton = new Control({ position: 'topleft' })\n  resetButton.onAdd = map => {\n    const container = DomUtil.create('div', 'leaflet-bar leaflet-control')\n    const button = DomUtil.create('a', 'fas fa-redo', container)\n\n    DomEvent.disableClickPropagation(button).addListener(\n      button,\n      'click',\n      () => {\n        if (map.viewport) {\n          map.fitBounds(map.viewport)\n        } else {\n          map.setView(defaultView, DEFAULT_ZOOM)\n        }\n\n        map.tileLayer.resetPlane()\n      }\n    )\n\n    return container\n  }\n\n  resetButton.addTo(map)\n\n  const planeButtons = new Control({ position: 'topright' })\n  planeButtons.onAdd = map => {\n    const container = DomUtil.create('div', 'leaflet-bar leaflet-control')\n    const upButton = DomUtil.create('a', 'fas fa-sort-amount-up-alt', container)\n    const label = DomUtil.create('span', 'leaflet-custom-control', container)\n    const downButton = DomUtil.create('a', 'fas fa-sort-amount-down', container)\n\n    const updateButtons = () => {\n      if (!map.tileLayer) {\n        return\n      }\n\n      label.textContent = map.tileLayer.getPlane()\n\n      if (map.tileLayer.getPlane() === map.tileLayer.options.maxPlane) {\n        DomUtil.addClass(upButton, 'leaflet-disabled')\n      } else {\n        DomUtil.removeClass(upButton, 'leaflet-disabled')\n      }\n\n      if (map.tileLayer.getPlane() === map.tileLayer.options.minPlane) {\n        DomUtil.addClass(downButton, 'leaflet-disabled')\n      } else {\n        DomUtil.removeClass(downButton, 'leaflet-disabled')\n      }\n    }\n\n    updateButtons()\n    map.on('planechange', updateButtons)\n\n    DomEvent.disableClickPropagation(upButton).addListener(\n      upButton,\n      'click',\n      () => {\n        map.tileLayer.setPlane(map.tileLayer.getPlane() + 1)\n      }\n    )\n\n    DomEvent.disableClickPropagation(downButton).addListener(\n      downButton,\n      'click',\n      () => {\n        map.tileLayer.setPlane(map.tileLayer.getPlane() - 1)\n      }\n    )\n\n    return container\n  }\n\n  planeButtons.addTo(map)\n\n  if (map.viewport) {\n    map.fitBounds(map.viewport)\n  }\n}\n\nconst TileMapHandler = ({ tiles, selected, plane }) => {\n  const map = useMap()\n\n  if (!map.tileLayer) {\n    map.tileLayer = new MainTileLayer(\n      'https://raw.githubusercontent.com/mejrs/mejrs.github.io/master/layers/{source}/-1/{zoom}/{plane}_{x}_{y}.png',\n      {\n        noWrap: true,\n        plane: plane,\n        minPlane: MIN_PLANE,\n        maxPlane: MAX_PLANE,\n        source: 'map_squares_osrs',\n        minZoom: MIN_ZOOM,\n        maxNativeZoom: MAX_NATIVE_ZOOM,\n        maxZoom: MAX_ZOOM,\n        errorTileUrl:\n          'https://raw.githubusercontent.com/mejrs/mejrs.github.io/master/layers/alpha_pixel.png'\n      }\n    )\n\n    map.tileLayer.addTo(map)\n  }\n\n  map.tileLayer.originalPlane = plane\n  map.tileLayer.setPlane(plane)\n\n  if (selected.length > 0) {\n    const tilesX = selected.map(t => t.x)\n    const tilesY = selected.map(t => t.y)\n    const minX = Math.min(...tilesX) - BOUNDS_TOLERANCE\n    const maxX = Math.max(...tilesX) + BOUNDS_TOLERANCE\n    const minY = Math.min(...tilesY) - BOUNDS_TOLERANCE\n    const maxY = Math.max(...tilesY) + BOUNDS_TOLERANCE\n    const minCorner = toLatLng(minX, minY)\n    const maxCorner = toLatLng(maxX, maxY)\n    const viewport = [minCorner, maxCorner]\n\n    map.viewport = viewport\n    map.fitBounds(viewport)\n  }\n\n  return tiles.map(tile => {\n    const pos = toLatLng(tile.x, tile.y)\n    const pos2 = toLatLng(tile.x + 1, tile.y + 1)\n    const bounds = [pos, pos2]\n    return (\n      <Fragment>\n        {tile.label && (\n          <ImageOverlay bounds={bounds} url={'/img/tile-text.png'} />\n        )}\n        <Rectangle\n          bounds={bounds}\n          pathOptions={{\n            color: tile.color,\n            fillColor: tile.color,\n            fillOpacity: 0.3,\n            weight: 1,\n            interactive: false\n          }}\n        >\n          {tile.label && <Tooltip>{tile.label}</Tooltip>}\n        </Rectangle>\n      </Fragment>\n    )\n  })\n}\n\nconst RuneScapeMap = ({ tiles, selected }) => {\n  if (!tiles) {\n    tiles = []\n  }\n\n  if (!selected) {\n    selected = tiles\n  }\n\n  tiles = tiles.map(mapTile)\n  selected = selected.map(mapTile)\n\n  const plane = selected.length > 0 ? selected[0].z || 0 : 0\n\n  return (\n    <Fragment>\n      <MapContainer\n        minZoom={MIN_ZOOM}\n        maxZoom={MAX_ZOOM}\n        maxBounds={[\n          [-1000, -1000],\n          [12800 + 1000, 12800 + 1000]\n        ]}\n        maxBoundsViscosity={0.5}\n        zoom={DEFAULT_ZOOM}\n        attributionControl={false}\n        whenCreated={prepareMap}\n        crs={CRS.Simple}\n      >\n        <TileMapHandler tiles={tiles} selected={selected} plane={plane} />\n      </MapContainer>\n    </Fragment>\n  )\n}\n\nexport default RuneScapeMap\n","import { h } from 'preact'\nimport Layout from '../components/layout'\nimport hero from '../_data/hero'\nimport Meta from '../components/meta'\nimport { connect } from 'react-redux'\nimport RuneScapeMap from '../components/runescape-map'\nimport './tag.css'\nimport NotFound from '../components/not-found'\n\nconst TileShow = ({ data, tiles }) => {\n  if (!tiles || tiles.length === 0) {\n    return <NotFound />\n  }\n\n  return (\n    <Layout>\n      <Meta title={`Tile markers - ${hero.title}`} description={data} />\n      <section id=\"tiles\">\n        <div class=\"content-section tag-container\">\n          <RuneScapeMap tiles={tiles} />\n          <pre class=\"pre-select\">{data}</pre>\n        </div>\n      </section>\n    </Layout>\n  )\n}\n\nconst mapStateToProps = (state, { b64 }) => {\n  let decodedData = ''\n  let jsonData = []\n\n  try {\n    const b64string = b64 || window.location.hash.substring(1)\n    decodedData = atob(b64string)\n    jsonData = JSON.parse(decodedData)\n  } catch (ignored) {}\n\n  return {\n    data: decodedData,\n    tiles: jsonData\n  }\n}\n\nexport default connect(mapStateToProps)(TileShow)\n"],"sourceRoot":""}